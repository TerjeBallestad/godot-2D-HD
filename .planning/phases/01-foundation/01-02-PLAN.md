---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - scenes/interior/interior_scene.tscn
  - assets/sprites/*.import
autonomous: false

must_haves:
  truths:
    - "User's pixel art assets are visible in the scene as Sprite3D nodes"
    - "Furniture creates a cozy living room composition"
    - "Pixel art renders with crisp nearest-neighbor filtering (no blur)"
    - "Scene feels like a complete interior space ready for HD-2D evaluation"
  artifacts:
    - path: "scenes/interior/interior_scene.tscn"
      provides: "Scene with Sprite3D furniture placed in room"
      contains: "Sprite3D"
    - path: "assets/sprites/"
      provides: "Imported pixel art assets"
  key_links:
    - from: "scenes/interior/interior_scene.tscn"
      to: "assets/sprites/"
      via: "Sprite3D texture references"
      pattern: "texture.*res://assets"
---

<objective>
Import user's pixel art assets and compose the living room scene with Sprite3D furniture.

Purpose: Transforms the empty lighting setup into a viewable interior space with pixel art furniture - the actual visual content that will be evaluated for HD-2D quality. This is where the user sees their assets rendered with the configured lighting and post-processing.

Output: A complete living room scene with fireplace, chairs, rugs, and cozy furnishings placed using Sprite3D nodes.
</objective>

<execution_context>
@/Users/godstemning/.claude/get-shit-done/workflows/execute-plan.md
@/Users/godstemning/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Provide pixel art asset locations</name>
  <action>
The user indicated "pixel art assets are ready to use" but no image files exist in the project yet.

User needs to provide the pixel art assets for the living room scene.
  </action>
  <instructions>
Please provide your pixel art assets by ONE of these methods:

**Option A: Copy files into project**
Copy your pixel art PNG files into the project at: `/Users/godstemning/Projects/godot-2D-HD/assets/sprites/`

Expected assets for a cozy living room (based on CONTEXT.md decisions):
- Fireplace
- Chairs/seating
- Table(s)
- Rug(s)
- Wall decorations (optional)
- Lamps (visual, for light source positions)
- Any additional furniture

**Option B: Provide external path**
If your assets are in another location, provide the path and I'll copy them.

**Option C: Use placeholders**
If you want to proceed with placeholder rectangles for now (can swap real assets later), say "use placeholders" and specify approximate room dimensions.
  </instructions>
  <resume-signal>
Respond with one of:
- "assets added" (after copying files to assets/sprites/)
- "path: /your/asset/folder" (for external assets)
- "use placeholders" (to proceed without real assets)
  </resume-signal>
</task>

<task type="auto">
  <name>Task 2: Import and place pixel art assets as Sprite3D furniture</name>
  <files>scenes/interior/interior_scene.tscn, assets/sprites/*.import</files>
  <action>
After user provides assets, import and place them in the scene:

**Asset Import Configuration:**
For each PNG in assets/sprites/:
1. Godot auto-generates .import files on project scan
2. Verify filter mode is Nearest (should inherit from project settings)
3. If not, modify .import to set filter=false

**Sprite3D Placement (under Assets node in scene):**

Create Sprite3D nodes for each furniture piece with these settings:
- texture_filter = TEXTURE_FILTER_NEAREST (explicit, don't rely on inheritance)
- alpha_cut = ALPHA_CUT_DISCARD (hard pixel edges)
- pixel_size = 0.01 (adjust based on asset scale - 1 pixel = 1cm)
- billboard = BILLBOARD_DISABLED (furniture stays in place)

**Composition Guidelines (from CONTEXT.md):**
- Living area setting: fireplace as focal point, chairs arranged around it
- Moderately furnished: lived-in but not cluttered
- Full room visible: place items to define room boundaries
- Position assets so lighting interacts well:
  - Fireplace near the Fireplace OmniLight3D
  - Lamps near TableLamp/FloorLamp positions
  - Rug in center area
  - Chairs facing fireplace

**Approximate positions (adjust based on actual assets):**
- Fireplace: (-3, 0, 0) - against wall, aligned with firelight
- Rug: (0, 0, 0) - center of room, flat on floor
- Chair 1: (-1, 0, 1) - facing fireplace
- Chair 2: (1, 0, 1) - facing fireplace
- Table: (0, 0, -1) - in front of chairs
- Lamps: near (2, 0, 0) and (-2, 0, 2) to match light positions

**Y-Positioning:**
- Floor items (rugs): Y = 0 or slight offset (0.01)
- Standing items (chairs, fireplace): Y based on sprite pivot
- Sprite3D centered property may need adjustment for floor contact
  </action>
  <verify>
1. Run scene and observe:
   - All assets visible and correctly positioned
   - No texture blur (crisp pixel edges)
   - Lighting illuminates furniture correctly
   - Room feels composed, not randomly scattered

2. Check each Sprite3D in inspector:
   - texture_filter = Nearest
   - alpha_cut = Discard
   - Texture assigned correctly
  </verify>
  <done>
Living room composed with pixel art furniture:
- Fireplace and seating create cozy gathering space
- Assets render with crisp pixel art filtering
- Lighting interacts naturally with furniture placement
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of HD-2D foundation</name>
  <what-built>
Complete Phase 1 foundation:
- Interior scene with WorldEnvironment (ACES tone mapping, SSAO, glow)
- Layered lighting (window daylight + warm lamps + fireplace)
- Pixel art assets placed as Sprite3D furniture
- Isometric camera angle
  </what-built>
  <how-to-verify>
1. Run the scene: Open Godot editor, press F5 or click Play Scene
2. Verify these Phase 1 success criteria:

**ENV-01: Interior house scene built with pixel art assets**
- [ ] Room has visible walls/boundaries
- [ ] Furniture creates a cozy living room
- [ ] Pixel art is crisp, not blurry

**ENV-02: WorldEnvironment with tone mapping and ambient lighting**
- [ ] Colors look rich and vibrant (ACES effect)
- [ ] Warm golden tones dominate (lamp lighting)
- [ ] Subtle shadows in corners (SSAO)
- [ ] Soft glow on bright areas

**Camera and Composition**
- [ ] Scene viewed from isometric-style angle
- [ ] Full room visible in frame
- [ ] Looks like "miniature diorama" aesthetic

**Overall Impression**
Does this feel like a good foundation for HD-2D evaluation?
- Warm, cozy, Octopath Traveler-like atmosphere
- Ready to add character sprite in next phase
  </how-to-verify>
  <resume-signal>
Respond with:
- "approved" - Phase 1 complete, ready for Phase 2
- Describe issues - I'll address them before marking complete
  </resume-signal>
</task>

</tasks>

<verification>
Phase 1 Success Criteria (from ROADMAP.md):

1. Interior house scene renders with user's pixel art assets visible
   - Run scene, observe furniture rendered correctly

2. WorldEnvironment shows ACES tone mapping applied (colors look HDR-correct)
   - Compare to non-ACES: colors should be richer, more vibrant
   - Highlights should roll off smoothly, not clip

3. Ambient lighting illuminates the scene appropriately for interior space
   - No pure black areas (ambient fill working)
   - Layered lighting visible (cool window accent, warm lamp dominance)

4. Camera shows the scene from a fixed isometric-style angle
   - ~35 degree down angle
   - Room overview visible
   - Perspective (not orthographic)
</verification>

<success_criteria>
- [ ] User's pixel art assets imported to project
- [ ] Sprite3D nodes created with Nearest filtering
- [ ] Living room composition: fireplace, chairs, rug, table visible
- [ ] Scene runs without errors
- [ ] User approves visual quality for HD-2D evaluation foundation
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
