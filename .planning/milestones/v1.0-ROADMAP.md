# Milestone v1.0: Evaluation Prototype

**Status:** SHIPPED 2026-02-03
**Phases:** 1-6
**Total Plans:** 10

## Overview

This prototype evaluates whether Godot 4 can achieve the HD-2D visual style (Octopath Traveler-like) well enough to warrant switching from Unreal Engine. Starting with an interior house scene foundation, we progressively layer in pixel art sprites, click-to-move controls, post-processing effects, and culminate with the signature depth-based tilt-shift shader. The go/no-go decision is made by walking through the finished scene and judging by gut feel.

## Phases

### Phase 1: Foundation

**Goal**: A viewable interior house scene exists with proper rendering environment configured
**Depends on**: Nothing (first phase)
**Requirements**: ENV-01, ENV-02
**Plans**: 2 plans

Plans:
- [x] 01-01-PLAN.md - Scene infrastructure (WorldEnvironment, layered lighting, isometric camera)
- [x] 01-02-PLAN.md - Pixel art asset integration and visual verification

**Details:**
- WorldEnvironment with ACES tone mapping, exposure 1.0, white 6.0
- Nearest-neighbor texture filtering for crisp pixel art
- Perspective camera at 50 FOV for depth effects
- 3D furniture models from Kenney Furniture Kit 2
- Layered warm interior lighting with cool window accent

### Phase 2: Character

**Goal**: Player character exists as a pixel-art billboard sprite in the 3D scene
**Depends on**: Phase 1
**Requirements**: SPRT-01, SPRT-02
**Plans**: 1 plan

Plans:
- [x] 02-01-PLAN.md - Player character Sprite3D with Y-axis billboard, blob shadow, and scene integration

**Details:**
- Sprite3D with billboard=FIXED_Y, texture_filter=0, alpha_cut=DISCARD, shaded=true
- pixel_size=0.015 for character scale
- ShapeCast3D + Decal for dynamic blob shadow
- Collision layers: floor on layer 1, ShapeCast mask 1

### Phase 3: Controls

**Goal**: User can navigate the character and adjust camera to evaluate the scene from different perspectives
**Depends on**: Phase 2
**Requirements**: CTRL-01, CTRL-02, CTRL-03
**Plans**: 2 plans

Plans:
- [x] 03-01-PLAN.md - Click-to-move navigation with NavigationAgent3D and eased motion
- [x] 03-02-PLAN.md - Camera gimbal with orbit rotation (45-degree snapping) and zoom controls

**Details:**
- Click-to-move with _unhandled_input, raycast collision_mask=1 for floor only
- Eased motion: ACCELERATION=3.0, DECELERATION=4.0, MAX_SPEED=1.5
- Camera gimbal: CameraRig > InnerGimbal > Camera3D hierarchy
- Q/E for 45-degree orbit, right-click drag for free orbit
- Mouse wheel / +/- for zoom (3.0-8.0 units)
- R to reset camera

### Phase 4: Atmosphere

**Goal**: Scene has the dreamy, atmospheric look characteristic of HD-2D through post-processing and lighting
**Depends on**: Phase 3
**Requirements**: REND-02, REND-03, REND-04, SPRT-03
**Plans**: 3 plans

Plans:
- [x] 04-01-PLAN.md - Bloom and volumetric fog configuration in Environment
- [x] 04-02-PLAN.md - Vignette shader creation (rectangular falloff with warm tint)
- [x] 04-03-PLAN.md - Vignette integration, point light shadows, and visual verification

**Details:**
- Emissive-only bloom (glow_bloom=0.47, threshold=1.0)
- Volumetric fog (density=0.09, anisotropy=0.6)
- Vignette: CanvasLayer(layer=100) > ColorRect with alpha overlay shader
- Point light shadows on TableLamp, FloorLamp, Fireplace
- Emissive sprite shader with EMISSION + vertex billboard + ALPHA_SCISSOR_THRESHOLD

### Phase 5: Tilt-Shift

**Goal**: The signature HD-2D miniature/diorama effect is achieved with depth-based blur
**Depends on**: Phase 4
**Requirements**: REND-01
**Plans**: 1 plan

Plans:
- [x] 05-01-PLAN.md - Tilt-shift shader with depth-based blur and focal tracking

**Details:**
- View-space depth comparison (not world-space) for fullscreen quad compatibility
- Exponential smoothing with focal_smoothing=5.0, height_offset=0.5
- Tuned parameters: focus_distance=0.6, blur_max=1.5, blur_transition=2.0
- T key toggles effect, D key cycles debug modes

### Phase 6: Pathfinding (Deferred)

**Goal**: Direct movement for visual prototype (pathfinding deferred)
**Depends on**: Phase 5
**Requirements**: None (gap closure from audit)
**Status**: Deferred - NavigationAgent3D had oscillation issues and navmesh baking failed to produce usable geometry. Direct click-to-move movement is sufficient for evaluating the HD-2D visual style.
**Plans**: 1 plan (modified)

Plans:
- [x] 06-01-PLAN.md - Direct movement (pathfinding deferred)

**Details:**
- Direct movement works smoothly toward clicked position
- Movement has eased acceleration/deceleration
- Visual evaluation of HD-2D style is possible

---

## Milestone Summary

**Key Decisions:**

- ACES tone mapping with exposure 1.0, white 6.0 for Octopath-style look
- Nearest-neighbor texture filtering for crisp pixel art
- Perspective camera at 50 FOV for depth effects (not orthographic)
- 3D furniture models, Sprite3D for characters only (standard HD-2D approach)
- View-space depth comparison for tilt-shift shader (world-space failed with fullscreen quad)
- Direct movement for prototype (pathfinding deferred - NavigationAgent3D issues)

**Issues Resolved:**

- Blob shadow collision detection (explicit collision_layer/mask)
- Custom spatial shader breaking billboard (implemented in vertex shader)
- Alpha discard preventing shadows (ALPHA_SCISSOR_THRESHOLD)
- Screen texture sampling unreliable (switched to alpha overlay vignette)
- Tilt-shift world position reconstruction (switched to view-space comparison)

**Technical Debt:**

- print() debug statements in tilt_shift_controller.gd
- NavigationAgent3D and NavigationRegion3D nodes remain in scene (unused)
- Pathfinding deferred - can be restored if needed for gameplay

---

*For current project status, see .planning/ROADMAP.md*
